<!doctype html>
<html>
<head>
	<meta charset="UTF-8">
	<title>WebSocket Chat</title>
</head>
<body>
	<h1>WebSocket Chat</h1>
	<form id="websocket_submission" method="GET">
		<label for="location">Location</label><input id="location" name="location" type="text" />
		<br />
		<label for="message">Message</label><input id="message" name="message" type="text" />
		<br />
		<a href="#" id="websocket_submit">Submit</a>
	</form>
	<footer>
	</footer>
	<script src="http://www.google.com/jsapi"></script>
	<script>google.load("jquery", "1.4")</script>
	<script>
	function openConnection(location){
		if (!location || location === ""){
			location = "ws://0.0.0.0:3000/ws";
		}
		alert(location);
		conn = new WebSocket(location);
		conn.onopen = function(e) {
			alert('Connection open ' + e);
		};
		conn.onclose = function(e) {
			alert('Connection closed ' + e);
		};
		conn.onmessage = function(e){
			alert('Message received: ' + e.data);
		};
		conn.onerror = function(e) {
			alert('Error: ' + e);
		};
	}

	openConnection($('#location').value);
	$('#websocket_submit').click(function(){
		conn.send($('#message').value);
		return false;
	});

	</script>
	</body>
</html>